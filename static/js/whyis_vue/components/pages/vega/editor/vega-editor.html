<div>
  <split-pane :min-percent='20' :default-percent='66' split="vertical">
    <template slot="paneL">
      <split-pane :default-percent="50" split="vertical">
        <template slot="paneL">
          <md-card>
            <md-card-header>
              <div class="md-title">SPARQL Query</div>
            </md-card-header>
            <md-card-content>
              <yasqe v-if="chart.query"
                     v-model="chart.query"
                     v-on:query-success="onQuerySuccess">
              </yasqe>
            </md-card-content>
          </md-card>
        </template>
        <template slot="paneR">
          <md-card>
            <md-card-header>
              <div class="md-title">Vega Specification</div>
            </md-card-header>
            <md-card-content id="vega-spec-editor">
              <v-jsoneditor v-if="chart.baseSpec"
                            v-model="chart.baseSpec"
                            :options="specJsonEditorOpts"
                            :error="onSpecJsonError">
              </v-jsoneditor>
            </md-card-content>
          </md-card>
        </template>
      </split-pane>
    </template>
    <template slot="paneR">
      <split-pane :default-percent="30" split="horizontal">
        <template slot="paneL">
          <md-card class="chart-metadata">
            <md-card-actions md-alignment="left">
              <md-button class="md-primary md-raised"
                        :disabled="!unsavedChanges"
                        v-bind:title="saveLabel"
                        v-bind:aria-label="saveLabel"
                        @click="saveChart()"
                        >
                <md-icon>save</md-icon>
                Save
              </md-button>
              <md-button class="md-primary md-raised"
                        v-show="pageView === 'edit'"
                        :href="viewVisUrl"
                        @click="onNavClick($event)"
                        title="View this visualization"
                        aria-label="View this visualization"
                        >
                <md-icon>visibility</md-icon>
                View
              </md-button>
            </md-card-actions>
            <md-card-content>
              <div class="title-bar">
                <md-field class="chart-title-field">
                  <label for="chart-title">Title</label>
                  <md-input name="chart-title" id="chart-title" v-model="chart.title"/>
                </md-field>
              </div>
              <md-field class="chart-description-field">
                <label for="chart-description">Description</label>
                <md-textarea name="chart-description" id="chart-description" v-model="chart.description"/>
              </md-field>
            </md-card-content>
          </md-card>
        </template>
        <template slot="paneR">
          <md-tabs>
            <md-tab md-label="Chart">
              <div class="vega-container">
                <vega-lite :spec="spec" @new-vega-view="onNewVegaView"/>
              </div>
            </md-tab>
            <md-tab md-label="Table">
              <yasr v-bind:results="results"></yasr>
            </md-tab>
          </md-tabs>
        </template>
      </split-pane>
    </template>
  </split-pane>
  <md-dialog-confirm
      :md-active.sync="discardChangesDialogActive"
      md-title="Discard Changes?"
      md-content="You are navigating away from this page.
                  Any changes will be discarded. Proceed?"
      md-confirm-text="Proceed"
      md-cancel-text="Cancel"
      @md-confirm="discardChangesAndGo()" />
</div>
